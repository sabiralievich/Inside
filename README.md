### 1. Как скачать образ с репозитория Dockerhub:
а)  Залогиниться в Docker:<br/>
      docker login -u ‘username’<br/><br/>
б)  скачать образ на локальную машину:<br/>
docker pull sabiralievich/inside:0.0.2
  
### 2. Как запустить контейнер на локальной машине:
  а)  docker run -p 8080:8080 sabiralievich/inside:0.0.2<br/>
  
  ![1-1](https://user-images.githubusercontent.com/84394882/143913468-e936fc92-0616-4074-9ca5-b006b4fe0bac.png)

  
### 3. В базу данных занесены следующие данные пользователей (для тестирования)
| name: **bulat** password: **password**<br/>
| name: **test1** password: **test1**<br/>

### 4. Для создания запросов использовать любое стороннее приложение. Далее используется Postman.

### 5. Для запросов в первый endpoint (авторизация) используется url: 
http://localhost:8080/login<br/>

### 5. Для запросов во второй endpoint (работа с данными) используется url:
http://localhost:8080/postdata<br/>

### 7. Валидация входных данных не выполняется.

### Пример запроса на авторизацию:
![auth](https://user-images.githubusercontent.com/84394882/143914013-eed8aea8-d11d-4651-83ea-6144f78d9d1f.JPG)


### Пример запроса на операцию с данными 
(в заголовке указан токен, полученный на предыдущем шаге):<br/>
![postData](https://user-images.githubusercontent.com/84394882/143914351-a844e92e-ec00-428a-8efb-c2b480560242.JPG)

### Пример запроса с сообщением "history 10" 
(контракт задачи – возврат 10 последних сообщений)<br/>
![history](https://user-images.githubusercontent.com/84394882/143914789-cdbae4eb-dfa8-4f46-b912-446fc97950cb.JPG)

### Пример запроса с токеном, отличным от того, что был получен на этапе авторизации
![unauth](https://user-images.githubusercontent.com/84394882/143915077-1b9a1df9-5f21-4263-8a29-b71b9b0055f9.JPG)

### Описание работы приложения
Приложение состоит из двух логических частей: POST endpoint, выполняющий функцию авторизации, и POST endpoint, выполняющий операции с хранилищем данных.<br/>
### Блок авторизации

а) получает POST-запрос с JSON вида:<br/>
{"name" : "имя отправителя", password: "пароль" }<br/>
	б) генерирует JWT-token на основе первичного ключа и имени пользователя, пришедшего в п. 2 а (если данные о пользователя содержатся в БД). <br/><br/>
	в) отправляет в ответ код 200 и JSON вида:<br/>
{ “token” : "тут сгенерированный токен" }<br/><br/>
	г) или отправляет в ответ пустую строку и код 404 в случае, если пользователь с именем, пришедшим в п. 2 а, не существует в базе данных.
Блок работы с хранилищем данных<br/><br/>

	а) принимает POST-запрос с JSON вида:<br/>
	{“name”: "имя отправителя", “text”: "текст сообщения"}<br/><br/>
В заголовке запроса указан токен, полученный в п. 2 б.<br/>
	б) сравнивает значение заголовка с токеном с тем, что был отправлен в п 2 б. В случае совпадения отвечает кодом 200 и добавляет сообщение в базу данных. В случае несовпадения токенов, отвечает кодом 401.<br/>
	в) В случае, если тело запроса состоит из строки "history 10", отвечает кодом 202 и отдает 10 последних сообщений из базы данных.<br/>
 
### Описание реализации

Приложение использует следующие библиотеки:<br/>
1. org.springframework:boot<br/>
2. org.springframework:jdbc<br/>
3. con.h2database<br/>

### Структура каталогов проекта
![tree](https://user-images.githubusercontent.com/84394882/143915633-1a5adda6-1b54-485a-87cf-56274f46e3ef.JPG)

В качестве объектов доступа к данным выступают классы Login, Message, User и Token. Так как данные о пользователях и сообщениях хранятся в базе данных, на их основе созданы соответствующие модели, описанные интерфейсами CrudRepository. Управляют процессами авторизации и операциями с хранилищем классы LoginController и DataPostContoller соответственно. Взаимодействие компонентов обеспечивается классами, помеченными аннотацией @Service – LoginService и DataPostService. Запуск приложения происходит из метода main() класса Application.java.











